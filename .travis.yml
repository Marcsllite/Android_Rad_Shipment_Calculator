language: android
jdk: oraclejdk8
android:
        components:
                - platform-tools
                - build-tools-29.0.2
                - android-29
                - extra-android-m2repository

script:
        - ./gradlew build jacocoTestReport connectedCheck

before_script:
        - chmod +x gradlew

before_install:
        - pip install --user codecov    #Install codecov

after_success:
        - codecov                       #Run codecov

before_cache:
        - rm -f $HOME/.gradle/caches/modules-2/modules-2.lock

cache:
        directories:      #Cache all dirs under .gradle folder
                - $HOME/.gradle/daemon      #Cache daemon logs
                - $HOME/.gradle/native      #Cache library downloaded from the gradle dependency
                - $HOME/.gradle/wrapper     #Cache the gradle